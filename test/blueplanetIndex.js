const axios = require('axios');

const restaurant_id = ['14116', '14560', '15664', '15699', '15710', '15720', '15792', '15903', '15957', '16030', '16234', '16250', '16279', '15830', '2517', '14738', '167', '2426', '6176', '8069', '13227', '13724', '13910', '13948', '14359', '14401', '14867', '15013', '15645', '15996', '16335', '622', '652', '659', '799', '1624', '13864', '13875', '13942', '14013', '14294', '14352', '15036', '15209', '15682', '14957', '14827', '13105', '13363', '13619', '14177', '14486', '14590', '14664', '14697', '15063', '15728', '15951', '16156', '16259', '654', '1721', '1736', '2468', '9332', '12945', '13209', '13860', '14019', '14024', '14885', '15135', '15657', '15708', '15987', '13896', '14872', '15674', '15702', '15743', '15793', '15853', '15864', '15878', '15949', '16084', '16097', '16133', '16128', '16229', '16283', '203', '9305', '14111', '16390', '16347', '42', '324', '485', '604', '731', '768', '1773', '14147', '14435', '14494', '15233', '15877', '16045', '16150', '16296', '1174', '1732', '14447', '14831', '14832', '14958', '15024', '15056', '15240', '15659', '15764', '15775', '16158', '16354', '16224', '2199', '4562', '13432', '13434', '14666', '14808', '14817', '15142', '15163', '15908', '16061', '16173', '16214', '16220', '16320', '11730', '14764', '15047', '15117', '16072', '16058', '16345', '14579', '15117', '1731', '13362', '13462', '13959', '14040', '14325', '14652', '14978', '15799', '16132', '3260', '1272', '14194', '14202', '14331', '14386', '14403', '14431', '16122', '16152', '16235', '16253', '16246', '15788', '15820', '16143', '13744', '14154', '14219', '14555', '15588', '15966', '16073', '16149', '16179', '16291', '16318', '16293', '16199', '16209', '16212', '16213', '444', '605', '1733', '13263', '13484', '13895', '14003', '14152', '14568', '14821', '14873', '15650', '15765', '15784', '15883', '15967', '16146', '16241', '16300', '1021', '1103', '1105', '1183', '13458', '13461', '13730', '14225', '14552', '15283', '15332', '15781', '16116', '2131', '2500', '14464', '14574', '14763', '15798', '15895', '15904', '15955', '15983', '16078', '16089', '16080', '16289', '15846', '12959']

// const restaurant_id = ['15063', '15728', '15951', '16156', '16259', '1721', '1736', '2468', '9332', '12945', '13209', '13860', '14019', '14024', '14885', '15135', '15657', '15708', '15987', '13896', '14872', '15674', '15702', '15743', '15793', '15853', '15864', '15878', '15949', '16084', '16097', '16133', '16128', '16229', '16283', '203', '9305', '14111', '16390', '16347', '42', '324', '485', '604', '731', '768', '1773', '14147', '14435', '14494', '15233', '15877', '16045', '16150', '16296', '1174', '1732', '14447', '14831', '14832', '14958', '15024', '15056', '15240', '15659', '15764', '15775', '16158', '16354', '16224', '2199', '4562', '13432', '13434', '14666', '14808', '14817', '15142', '15163', '15908', '16061', '16173', '16214', '16220', '16320', '11730', '14764', '15047', '15117', '16072', '16058', '16345', '14579', '1731', '13362', '13462', '13959', '14040', '14325', '14652', '14978', '15799', '16132', '3260', '1272', '14194', '14202', '14331', '14386', '14403', '14431', '16122', '16152', '16235', '16253', '16246', '15788', '15820', '16143', '13744', '14154', '14219', '14555', '15588', '15966', '16073', '16149', '16179', '16291', '16318', '16293', '16199', '16209', '16212', '16213', '444', '605', '1733', '13263', '13484', '13895', '14003', '14152', '14568', '14821', '14873', '15650', '15765', '15784', '15883', '15967', '16146', '16241', '16300', '1021', '1103', '1105', '1183', '13458', '13461', '13730', '14225', '14552', '15283', '15332', '15781', '16116', '2131', '2500', '14464', '14574', '14763', '15798', '15895', '15904', '15955', '15983', '16078', '16089', '16080', '16289', '15846', '551', '573']

let indexs = 0;
function runit (index) {
    if (indexs === restaurant_id.length) {
        console.log("全數執行完畢");
        return false;
    }
    console.log("正在執行第 " + index);
    axios.get('http://localhost:3000/api/restaurant/getBasic', { params: { restaurant_id: restaurant_id[index] } })
        .then(function (response) {
            console.log(index, response.data);
            if (response.data != 0) {
                indexs = index + 1;
                runit(indexs);
            }
        })
        .catch(function (error) {
            console.log(index, error);
            console.log(indexs + " 錯誤，請重新執行");
        });
}
runit(0);